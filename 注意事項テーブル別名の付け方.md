# 概要

OracleからSSMAを使用して変換したSQL文のどこかでテーブル別名が重複していると変換エラーが出力される。  
SQL Serverで別名の重複したSQL文を実行してもエラーは発生しないが、テーブルの別名が重複しているとSQLの可読性が落ちるため重複しないように名付ける。

# SQL

## 変換前

```SQL
MERGE INTO TBL_EXAMPLE AS A /* 重複 */
USING
    (
        SELECT A.ID, A.CAPTION 
        FROM TBL_EXAMPLE T1 RIGHT JOIN TBL_SAMPLE_WORK A /* 重複 */
        ON (T1.ID = A.ID)
    ) AS B
    ON (A.ID = B.ID)
WHEN MATCHED THEN
    UPDATE SET
    CAPTION = B.CAPTION
WHEN NOT MATCHED BY TARGET THEN
    INSERT (ID, CAPTION)
    VALUES (B.ID, B.CAPTION)
;
```

## 変換後

```SQL
DELETE FROM TBL_EXAMPLE;
INSERT INTO TBL_EXAMPLE VALUES (1, 'aaa');
INSERT INTO TBL_EXAMPLE VALUES (2, 'aaa');
INSERT INTO TBL_EXAMPLE VALUES (3, 'bbb');
INSERT INTO TBL_EXAMPLE VALUES (4, 'bbb');
INSERT INTO TBL_EXAMPLE VALUES (5, 'bbb');

DELETE FROM TBL_SAMPLE_WORK;
INSERT INTO TBL_SAMPLE_WORK VALUES (1, 'CCC');
INSERT INTO TBL_SAMPLE_WORK VALUES (6, 'DDD');

MERGE INTO TBL_EXAMPLE AS A /* 重複を修正 */
USING
    (
        SELECT T2.ID, T2.CAPTION 
        FROM TBL_EXAMPLE T1 RIGHT JOIN TBL_SAMPLE_WORK T2 /* 重複を修正 */
        ON (T1.ID = T2.ID)
    ) AS B
    ON (A.ID = B.ID)
WHEN MATCHED THEN
    UPDATE SET
    CAPTION = B.CAPTION
WHEN NOT MATCHED BY TARGET THEN
    INSERT (ID, CAPTION)
    VALUES (B.ID, B.CAPTION);
```

# 補足事項

* エラーコード：O2SS0083 への対応
